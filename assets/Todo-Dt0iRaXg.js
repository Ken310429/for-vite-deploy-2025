import{b as e}from"./axios-CnU1K9ZG.js";import{d as t,e as n,f as r,g as i,h as a,k as o,l as s,m as c,o as l,p as u,r as d,s as f,t as p,u as m,v as h,x as g,y as _}from"./index-uKDeT57H.js";const v={id:`todoListPage`,class:`bg-half`},y={class:`todo_sm`},b={class:`conatiner todoListPage vhContainer`},x={class:`todoList_Content`},S={class:`inputBox`},C={class:`todoList_list`},w={class:`todoList_tab`},T={class:`todoList_items`},E={class:`todoList_item`},D={class:`todoList_label`},O=[`checked`,`onClick`],k={key:0},A=[`onUpdate:modelValue`],j={class:`todoList_statistics`},M=`https://todolist-api.hexschool.io/`,N={__name:`Todo`,setup(N){let P=h(`small`),F=h([]),I=h({content:``}),L=h({token:``,nickname:``,uid:``}),R=h(`all`),z=e=>{R.value=e},B=i(()=>{switch(R.value){case`pending`:return F.value.filter(e=>!e.status);case`completed`:return F.value.filter(e=>e.status);case`all`:default:return F.value}}),V=i(()=>F.value.filter(e=>e.status===!0).length),H=h(!1),U=async()=>{try{let t=await e.get(`${M}todos/`,{headers:{Authorization:L.value.token}});F.value=t.data.data,console.log(F.value)}catch(e){console.log(e)}},W=async()=>{try{await e.post(`${M}todos/`,I.value,{headers:{Authorization:L.value.token}}),I.value=``,await U()}catch(e){console.log(e)}},G=()=>{H.value=!H.value},K=async t=>{try{H.value=!1,await e.put(`${M}todos/${t.id}`,{content:t.content},{headers:{Authorization:L.value.token}})}catch(e){console.log(e)}},q=async t=>{try{await e.patch(`${M}todos/${t}/toggle`,{},{headers:{Authorization:L.value.token}}),await U()}catch(e){console.log(e)}},J=async t=>{console.log(t);try{let n=await e.delete(`${M}todos/${t}`,{headers:{Authorization:L.value.token}});console.log(n),await U()}catch(e){console.log(e)}};return l(async()=>{let t=document.cookie.replace(/(?:^|.*;\s*)customTodoToken\s*=\s*([^;]*).*$/i,`$1`),n=await e.get(`${M}users/checkout`,{headers:{Authorization:t}});L.value=n.data,L.value.token=t,await U()}),(e,i)=>{let l=f(`RouterLink`),h=f(`Button`);return u(),o(`div`,v,[a(`nav`,null,[a(`h1`,null,[c(l,{to:`/todo`},{default:p(()=>i[4]||=[s(`ONLINE TODO LIST`,-1)]),_:1,__:[4]})]),a(`ul`,null,[a(`li`,y,[c(l,{to:`/todo`},{default:p(()=>[a(`span`,null,_(L.value.nickname)+`的代辦`,1)]),_:1})]),i[5]||=a(`li`,null,[a(`a`,{href:`#loginPage`},`登出`)],-1)])]),a(`div`,b,[a(`div`,x,[a(`div`,S,[m(a(`input`,{type:`text`,"onUpdate:modelValue":i[0]||=e=>I.value.content=e,placeholder:`請輸入待辦事項`},null,512),[[t,I.value.content]]),a(`a`,{href:`#`,onClick:n(W,[`prevent`])},i[6]||=[a(`i`,{class:`fa fa-plus`},null,-1)])]),a(`div`,C,[a(`ul`,w,[a(`li`,null,[a(`a`,{href:`#`,class:g({active:R.value===`all`}),onClick:i[1]||=n(e=>z(`all`),[`prevent`])},`全部`,2)]),a(`li`,null,[a(`a`,{href:`#`,class:g({active:R.value===`pending`}),onClick:i[2]||=n(e=>z(`pending`),[`prevent`])},`待完成`,2)]),a(`li`,null,[a(`a`,{href:`#`,class:g({active:R.value===`completed`}),onClick:i[3]||=n(e=>z(`completed`),[`prevent`])},`已完成`,2)])]),a(`div`,T,[a(`ul`,E,[(u(!0),o(r,null,d(B.value,e=>(u(),o(`li`,{key:e.id},[a(`label`,D,[a(`div`,null,[a(`input`,{class:`todoList_input`,type:`checkbox`,value:`true`,checked:e.status,onClick:t=>q(e.id)},null,8,O),H.value?m((u(),o(`input`,{key:1,type:`text`,"onUpdate:modelValue":t=>e.content=t},null,8,A)),[[t,e.content]]):(u(),o(`span`,k,_(e.content),1))]),a(`div`,null,[c(h,{icon:`pi pi-pencil`,onClick:G,severity:`secondary`,variant:`text`,rounded:``,size:P.value},null,8,[`size`]),c(h,{icon:`pi pi-check`,onClick:t=>K(e),severity:`secondary`,variant:`text`,rounded:``,size:P.value},null,8,[`onClick`,`size`]),c(h,{icon:`pi pi-times`,onClick:n(t=>J(e.id),[`prevent`]),severity:`secondary`,variant:`text`,rounded:``,size:P.value},null,8,[`onClick`,`size`])])])]))),128))]),a(`div`,j,[a(`p`,null,_(V.value)+` 個已完成項目`,1)])])])])])])}}};var P=N;export{P as default};